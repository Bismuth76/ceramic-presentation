<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../polymer/polymer.html">

<!--
An element to make beautiful presentations.

Example:

    <ceramic-presentation>
      <ceramic-slide>Slide 1</ceramic-slide>
      <ceramic-slide>Slide 2</ceramic-slide>
    </ceramic-presentation>

@demo
-->
<dom-module id="ceramic-presentation">

    <style>
        :host {
            display: block;
            box-sizing: border-box;
        }
    </style>

    <template>
        <content select="ceramic-slide">test</content>
    </template>

</dom-module>

<script>

    Polymer({

        is: 'ceramic-presentation',

        properties: {

            /**
             * `slideCount` indicates the number of slides included into the `ceramic-presentation`
             */
            slideCount: {
                type: Number,
                value: 0,
                notify: true
            },

            /**
             * `currentSlideIndex` indicates the index of current active slide
             */
            currentSlideIndex: {
                type: Number,
                value: 1,
                notify: true
            },

            /**
             * `infinite` indicates if the slides loop
             */
            infinite: {
                type: Boolean,
                value: false,
                notify: true
            },

            /**
             * `nextSlideIndex` indicates the next slide index
             */
            nextSlideIndex: {
                type: Number,
                computed: '_getNextSlide(currentSlideIndex,slideCount,infinite)',
                notify: true
            },

            /**
             * `prevSlideIndex` indicates the previous slide index
             */
            previousSlideIndex: {
                type: Number,
                computed: '_getPreviousSlide(currentSlideIndex,slideCount,infinite)',
                notify: true
            }
        },

        ready: function () {
            var self = this;
            this.async(function () {
                var content = Polymer.dom(self.root).querySelector('content');
                self.slideCount = Polymer.dom(content).getDistributedNodes().length;
            });

        },

        attached: function () {},

        detached: function () {},

        _getNextSlide: function (currentSlideIndex, slideCount, infinite) {
            var v_nextSlideIndex = null;

            if (currentSlideIndex === slideCount) {
                v_nextSlideIndex = infinite ? 1 : v_nextSlideIndex;

            } else {
                v_nextSlideIndex = currentSlideIndex + 1;
            }

            return v_nextSlideIndex;
        },

        _getPreviousSlide: function (currentSlideIndex, slideCount, infinite) {
            var v_prevSlideIndex = null;

            if (currentSlideIndex === 1) {
                v_prevSlideIndex = infinite ? slideCount : v_prevSlideIndex;
            } else {
                v_prevSlideIndex = currentSlideIndex - 1;
            }

            return v_prevSlideIndex;
        },

        /**
         * Move to next slide
         */
        nextSlide: function () {
            this.set('currentSlideIndex', this._getNextSlide(this.currentSlideIndex, this.slideCount, this.infinite));
        },

        /**
         * Move to previous slide
         */
        previousSlide: function () {
            this.set('currentSlideIndex', this._getPreviousSlide(this.currentSlideIndex, this.slideCount, this.infinite));
        }
    });

</script>
